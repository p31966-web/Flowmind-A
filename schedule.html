<!doctype html>
<html lang="th">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>FlowMind — ตารางเรียน</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">
  <div class="card">
    <h2>ตารางเรียน 7 คาบ/วัน (5 วัน)</h2>
    <div class="day-grid" id="dayGrid"></div>
    <div class="row" style="margin-top:8px">
      <button id="saveSchedule" class="btn">บันทึกตารางเรียน</button>
      <button id="toTasks" class="btn secondary">ไปป้อนงาน</button>
    </div>
  </div>
</div>

<script>
const DAYS=['mon','tue','wed','thu','fri'];
const DAY_LABEL={mon:'จันทร์',tue:'อังคาร',wed:'พุธ',thu:'พฤหัส',fri:'ศุกร์'};

function buildDayGrid(){
  const container=document.getElementById('dayGrid');
  container.innerHTML='';
  DAYS.forEach(day=>{
    const sec=document.createElement('section');
    sec.className='day';
    sec.innerHTML=`<h3>${DAY_LABEL[day]}</h3>`;
    for(let i=1;i<=7;i++){
      const inp=document.createElement('input');
      inp.type='text'; inp.name=day+'[]'; inp.placeholder=`คาบ ${i}`;
      sec.appendChild(inp);
    }
    container.appendChild(sec);
  });
}

function saveSchedule(){
  const schedule={};
  DAYS.forEach(day=>{
    schedule[day]=Array.from(document.getElementsByName(day+'[]')).map(i=>i.value.trim());
  });
  localStorage.setItem('flow_schedule',JSON.stringify(schedule));
  alert('บันทึกตารางเรียนเรียบร้อย ✅');
}

function loadSchedule(){
  const raw=localStorage.getItem('flow_schedule');
  if(!raw) return;
  const schedule=JSON.parse(raw);
  DAYS.forEach(day=>{
    const inputs=document.getElementsByName(day+'[]');
    Array.from(inputs).forEach((inp,i)=> inp.value=schedule[day]?.[i]||'');
  });
}

buildDayGrid();
loadSchedule();

document.getElementById('saveSchedule').addEventListener('click',saveSchedule);
document.getElementById('toTasks').addEventListener('click',()=>{
  window.location.href='tasks.html';
});
</script>
</body>
</html>
